<svg width="980" height="520" viewBox="0 0 980 520" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .group {
        fill: #f7f9fc;
        stroke: #d9e1ee;
        stroke-width: 1.5;
        rx: 18;
        ry: 18;
      }

      .node {
        fill: #ffffff;
        stroke: #cfd8e3;
        stroke-width: 1.5;
        rx: 14;
        ry: 14;
      }

      .engine-node {
        fill: #eef4ff;
        stroke: #c3d4ff;
      }

      .storage-node {
        fill: #f1faf6;
        stroke: #bfe5d3;
      }

      text {
        font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        fill: #1f2937;
      }

      .group-title {
        font-size: 14px;
        font-weight: 600;
        fill: #475569;
      }

      .node-text {
        font-size: 13px;
        font-weight: 500;
        text-anchor: middle;
        dominant-baseline: middle;
      }

      .arrow {
        stroke: #94a3b8;
        stroke-width: 1.6;
        fill: none;
        marker-end: url(#arrowhead);
      }

      .label {
        font-size: 12px;
        fill: #64748b;
        background: #fff;
      }
    </style>

    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"></polygon>
    </marker>
  </defs>

  <!-- Clients group -->
  <rect class="group" x="40" y="80" width="220" height="260"></rect>
  <text class="group-title" x="50" y="60">Clients</text>

  <rect class="node" x="70" y="120" width="160" height="48"></rect>
  <text class="node-text" x="150" y="144">Node</text>

  <rect class="node" x="70" y="188" width="160" height="48"></rect>
  <text class="node-text" x="150" y="212">Rust</text>

  <rect class="node" x="70" y="256" width="160" height="48"></rect>
  <text class="node-text" x="150" y="280">C#</text>

  <!-- Engine group -->
  <rect class="group" x="330" y="60" width="300" height="320"></rect>
  <text class="group-title" x="340" y="40">Engine</text>

  <rect class="node engine-node" x="385" y="100" width="190" height="56"></rect>
  <text class="node-text" x="480" y="128">gRPC ingest</text>

  <rect class="node engine-node" x="385" y="180" width="190" height="64"></rect>
  <text class="node-text" x="480" y="208">
    <tspan x="480" dy="-6">Append-only log</tspan>
    <tspan x="480" dy="16">(segments)</tspan>
  </text>

  <rect class="node engine-node" x="365" y="270" width="230" height="72"></rect>
  <text class="node-text" x="480" y="300">
    <tspan x="480" dy="-6">Segment processor</tspan>
    <tspan x="480" dy="16">(dual projection)</tspan>
  </text>

  <!-- Storage group -->
  <rect class="group" x="700" y="100" width="220" height="260"></rect>
  <text class="group-title" x="710" y="80">Storage</text>

  <rect class="node storage-node" x="730" y="140" width="160" height="48"></rect>
  <text class="node-text" x="810" y="164">_events/</text>

  <rect class="node storage-node" x="730" y="208" width="160" height="48"></rect>
  <text class="node-text" x="810" y="232">_current/</text>

  <rect class="node storage-node" x="730" y="276" width="160" height="48"></rect>
  <text class="node-text" x="810" y="300">_meta/</text>

  <!-- Arrows -->
  <line class="arrow" x1="260" y1="210" x2="330" y2="210"></line>
  <text class="label" x="285" y="198">IngestRecord</text>

  <line class="arrow" x1="480" y1="156" x2="480" y2="180"></line>
  <line class="arrow" x1="480" y1="244" x2="480" y2="270"></line>

  <line class="arrow" x1="630" y1="230" x2="700" y2="230"></line>
  <text class="label" x="655" y="218">writes</text>
</svg>
